{"ast":null,"code":"import _objectSpread from\"C:/Users/Natalia/Desktop/React course/burger-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Users/Natalia/Desktop/React course/burger-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Natalia/Desktop/React course/burger-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Natalia/Desktop/React course/burger-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Natalia/Desktop/React course/burger-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Modal from\"../../components/UI/Modal/Modal\";import Auxiliar from\"../Auxiliar/Auxiliar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var withErrorHandler=function withErrorHandler(WrappedComponent,axios){return/*#__PURE__*/function(_React$Component){_inherits(_class2,_React$Component);var _super=_createSuper(_class2);function _class2(){var _this;_classCallCheck(this,_class2);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={error:null};_this.errorConfirmedHandler=function(){_this.setState({error:null});};return _this;}_createClass(_class2,[{key:\"UNSAFE_componentWillMount\",value:function UNSAFE_componentWillMount(){var _this2=this;this.reqInterceptor=axios.interceptors.request.use(function(req){_this2.setState({error:null});return req;});this.resInterceptor=axios.interceptors.response.use(null,function(error){_this2.setState({error:error});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){axios.interceptors.request.eject(this.reqInterceptor);axios.interceptors.response.eject(this.resInterceptor);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Auxiliar,{children:[/*#__PURE__*/_jsx(Modal,{show:this.state.error,modalClosed:this.errorConfirmedHandler,children:this.state.error?this.state.error.message:null}),/*#__PURE__*/_jsx(WrappedComponent,_objectSpread({},this.props))]});}}]);return _class2;}(React.Component);};export default withErrorHandler;","map":{"version":3,"sources":["C:/Users/Natalia/Desktop/React course/burger-builder/src/hoc/withErrorHandler/withErrorHandler.js"],"names":["React","Modal","Auxiliar","withErrorHandler","WrappedComponent","axios","state","error","errorConfirmedHandler","setState","reqInterceptor","interceptors","request","use","req","resInterceptor","response","eject","message","props","Component"],"mappings":"s0BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,iCAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,sBAArB,C,wFAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,gBAAD,CAAmBC,KAAnB,CAA6B,CACpD,gVACEC,KADF,CACU,CACNC,KAAK,CAAE,IADD,CADV,OAkBEC,qBAlBF,CAkB0B,UAAM,CAC5B,MAAKC,QAAL,CAAc,CACZF,KAAK,CAAE,IADK,CAAd,EAGD,CAtBH,4EAIE,oCAA4B,iBAC1B,KAAKG,cAAL,CAAsBL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,SAACC,GAAD,CAAS,CAC5D,MAAI,CAACL,QAAL,CAAc,CAAEF,KAAK,CAAE,IAAT,CAAd,EACA,MAAOO,CAAAA,GAAP,CACD,CAHqB,CAAtB,CAIA,KAAKC,cAAL,CAAsBV,KAAK,CAACM,YAAN,CAAmBK,QAAnB,CAA4BH,GAA5B,CAAgC,IAAhC,CAAsC,SAACN,KAAD,CAAW,CACrE,MAAI,CAACE,QAAL,CAAc,CAAEF,KAAK,CAAEA,KAAT,CAAd,EACD,CAFqB,CAAtB,CAGD,CAZH,oCAcE,+BAAuB,CACrBF,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BK,KAA3B,CAAiC,KAAKP,cAAtC,EACAL,KAAK,CAACM,YAAN,CAAmBK,QAAnB,CAA4BC,KAA5B,CAAkC,KAAKF,cAAvC,EACD,CAjBH,sBAuBE,iBAAS,CACP,mBACE,MAAC,QAAD,yBACE,KAAC,KAAD,EACE,IAAI,CAAE,KAAKT,KAAL,CAAWC,KADnB,CAEE,WAAW,CAAE,KAAKC,qBAFpB,UAIG,KAAKF,KAAL,CAAWC,KAAX,CAAmB,KAAKD,KAAL,CAAWC,KAAX,CAAiBW,OAApC,CAA8C,IAJjD,EADF,cAOE,KAAC,gBAAD,kBAAsB,KAAKC,KAA3B,EAPF,GADF,CAWD,CAnCH,qBAAqBnB,KAAK,CAACoB,SAA3B,EAqCD,CAtCD,CAwCA,cAAejB,CAAAA,gBAAf","sourcesContent":["import React from \"react\";\r\n\r\nimport Modal from \"../../components/UI/Modal/Modal\";\r\nimport Auxiliar from \"../Auxiliar/Auxiliar\";\r\n\r\nconst withErrorHandler = (WrappedComponent, axios) => {\r\n  return class extends React.Component {\r\n    state = {\r\n      error: null,\r\n    };\r\n    UNSAFE_componentWillMount() {\r\n      this.reqInterceptor = axios.interceptors.request.use((req) => {\r\n        this.setState({ error: null });\r\n        return req;\r\n      });\r\n      this.resInterceptor = axios.interceptors.response.use(null, (error) => {\r\n        this.setState({ error: error });\r\n      });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      axios.interceptors.request.eject(this.reqInterceptor);\r\n      axios.interceptors.response.eject(this.resInterceptor);\r\n    }\r\n    errorConfirmedHandler = () => {\r\n      this.setState({\r\n        error: null,\r\n      });\r\n    };\r\n    render() {\r\n      return (\r\n        <Auxiliar>\r\n          <Modal\r\n            show={this.state.error}\r\n            modalClosed={this.errorConfirmedHandler}\r\n          >\r\n            {this.state.error ? this.state.error.message : null}\r\n          </Modal>\r\n          <WrappedComponent {...this.props} />\r\n        </Auxiliar>\r\n      );\r\n    }\r\n  };\r\n};\r\n\r\nexport default withErrorHandler;\r\n"]},"metadata":{},"sourceType":"module"}